<!DOCTYPE html>
<html>

<head>
  <title>Pick N Pack â€“ Chat Support</title>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <script>
    // Enable fullscreen mode
    window.fcWidgetMessengerConfig = {
      config: {
        fullscreen: true,
        headerProperty: { hideChatButton: true }
      }
    };
  </script>
  <style>
    body {
      margin: 0;
      background: #f7f9fc;
      font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
      color: #333;
      display: flex;
      height: 100vh;
      justify-content: center;
      align-items: center;
      overflow: hidden;
    }

    #c-body {
      position: absolute;
      background: white;
    padding: 75px 25px 25px 25px;
    border-radius: 16px;
    box-shadow: 0 15px 35px rgba(0, 0, 0, 0.08);
    text-align: center;
    max-width: 340px;
    width: 90% !important;
  
    z-index: 2;
    height: 20vh;
    display: flex;
    align-items: stretch;
    justify-content: center;
    flex-direction: column;
    gap: 70px;
    }

    #c-body p {
      margin: 0 0 18px;
      font-size: 1.15rem;
      line-height: 1.5;
    }

    #c-body p:first-child {
      font-weight: 600;
      color: #2d3748;
      font-size: 1.3rem;
      margin-bottom: 20px;
    }

    #c-body p:last-child {
      color: #64748b;
      font-size: 1.05rem;
      margin-bottom: 0;
    }

    .reload-btn {
      background: rgb(99, 102, 241);
      color: white;
      border: none;
      padding: 12px 24px;
      border-radius: 8px;
      font-size: 1rem;
      cursor: pointer;
      display: inline-flex;
      align-items: center;
      gap: 8px;
      transition: all 0.3s ease;
    }

    .reload-btn:hover {
      background: rgb(79, 82, 221);
    }

    .reload-btn:disabled {
      opacity: 0.7;
      cursor: not-allowed;
    }

    .reload-btn svg {
      width: 20px;
      height: 20px;
      transition: transform 0.5s ease;
    }

    .reload-btn.loading svg {
      animation: spin 1s linear infinite;
    }

    @keyframes spin {
      100% {
        transform: rotate(360deg);
      }
    }

    #loader{
  width:100%;
  height:100vh;
  display:flex;
  align-items:center;
  justify-content:center;
}
.circle-loader {
  display: flex;
  align-items: center;
  justify-content: center;
}

.circle {
  position: absolute;
  border: 3.5px solid transparent;
  border-radius: 50%;
  animation: rotate 3s infinite ease-in-out;
}

.circle-1 {
  width: 100px;
  height: 100px;
  border-top-color: rgb(99, 102, 241);
  border-right-color: rgb(99, 102, 241);
  animation-delay: -0.15s;
}

.circle-2 {
  width: 80px;
  height: 80px;
  border-top-color: #404041;
  border-right-color: #404041;
  animation-delay: -0.3s;
}

.circle-3 {
  width: 60px;
  height: 60px;
  border-top-color: rgb(99, 102, 241);
  border-right-color: rgb(99, 102, 241);
  animation-delay: -0.45s;
}

.circle-4 {
  width: 40px;
  height: 40px;
  border-top-color: #404041;
  border-right-color: #404041;
  animation-delay: -0.6s;
}

@keyframes rotate {
  50% {
    transform: rotate(360deg);
  }
}

.timer-text {
  position: absolute;
  font-size: 48px;
  color: black;
}
.error-overlay{
margin-top: -50px;
}
.dot-loader::after {
      content: "";
      display: inline-block;
      width: 1.5em;
      text-align: left;
      animation: dots 2s ease-in-out infinite;
    }
    
    @keyframes dots {
      0%, 20% { content: ""; }
      40% { content: "."; }
      60% { content: ".."; }
      80%, 100% { content: "..."; }
    }
  </style>

</head>

<body>
  <div id="c-body" role="status" aria-live="polite">
    <div id="loader">
      <div class="circle-loader" aria-label="Loading animation">
        <div class="circle circle-1"></div>
        <div class="circle circle-2"></div>
        <div class="circle circle-3"></div>
        <div class="circle circle-4"></div>
      </div>
    </div>
    <div class="loader-text">
      <p>PickNPack Chat Support</p>
      <p>Getting you connected <span class="dot-loader"></span></p>
    </div>
  </div>


<script src='//fw-cdn.com/13312838/5428194.js' chat='true'></script>

  <script>
      function waitForElementAndHide(attempts = 0) {
        const el = document.querySelector('.d_hotline.minimize.fc-mobile-close');
        if (el) {
          el.style.display = 'none';
        } else if (attempts < 30) {
          setTimeout(() => waitForElementAndHide(attempts + 1), 300);
        } else {
          console.warn('Close button with aria-label="Close widget" not found after multiple attempts.');
        }
      }


    document.addEventListener('DOMContentLoaded', () => {
      waitForElementAndHide();
    });

  function waitForWidgetAndOpen(attempts = 0) {
    if (window.fcWidget && typeof window.fcWidget.open === 'function') {
      window.fcWidget.open();
      
      // Add event listener for widget close
      window.fcWidget.on('widget:closed', function() {
        changeToRestore();
      });

      // After opening, wait a moment and then hide the close button
      setTimeout(() => {
        waitForElementAndHide();
      }, 7000); // 7 second delay to let chat open fully
    } else if (attempts < 20) {
      setTimeout(() => waitForWidgetAndOpen(attempts + 1), 300);
    } else {
      console.warn("fcWidget not available after multiple attempts.");
    }
  }

  function handleReload(button) {
    button.disabled = true;
    button.classList.add('loading');
    setTimeout(() => {
      window.location.reload();
    }, 1000);
  }

  document.addEventListener("DOMContentLoaded", function () {
    waitForWidgetAndOpen();
  });
  
  function changeToRestore(){
    const cBody = document.getElementById('c-body');
            if (cBody) {
              cBody.innerHTML = `
              <div class="error-overlay">
              <p>Oops! It looks like you closed the chat.</p>
              <p style="font-size: 12px;"> Restoring Chat in <span id="timer">5</span> seconds</p>
              <button class="reload-btn" onclick="handleReload(this)">
                <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                  <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 4v5h.582m15.356 2A8.001 8.001 0 004.582 9m0 0H9m11 11v-5h-.581m0 0a8.003 8.003 0 01-15.357-2m15.357 2H15" />
                </svg>
               Restore Chat
              </button> 
              </div>
              `;
              //start timer
              const timer = document.getElementById('timer');
              let time = 5;
              const interval = setInterval(() => {
                time--;
                timer.textContent = time;
                if (time <= 0) {
                  clearInterval(interval);
                  window.location.reload();
                }
              }, 1000);
            }
  }
</script>


</body>
<style>

</style>
</html>